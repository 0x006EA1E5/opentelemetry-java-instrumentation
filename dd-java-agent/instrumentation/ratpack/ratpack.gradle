apply plugin: 'version-scan'

versionScan {
  group = "io.ratpack"
  module = 'ratpack'
  versions = "[1.4.6,)"
  verifyPresent = [
    "ratpack.exec.ExecStarter"              : null,
    "ratpack.exec.Execution"                : null,
    "ratpack.func.Action"                   : null,
    "ratpack.http.client.HttpClient"        : null,
    "ratpack.server.internal.ServerRegistry": "buildBaseRegistry",
  ]
}

apply from: "${rootDir}/gradle/java.gradle"

// Ratpack only supports Java 1.8+
sourceCompatibility = 1.8
targetCompatibility = 1.8

dependencies {
  compileOnly group: 'io.ratpack', name: 'ratpack-core', version: '1.4.6'

  compile project(':dd-trace-ot')
  compile project(':dd-java-agent:agent-tooling')

  compile deps.bytebuddy
  compile deps.opentracing
  compile deps.autoservice

  testCompile project(':dd-java-agent:testing')
  testCompile group: 'io.ratpack', name: 'ratpack-test', version: '1.4.6'

  testCompile project(':dd-java-agent:instrumentation:okhttp-3') // used in the tests
  testCompile group: 'com.squareup.okhttp3', name: 'okhttp', version: '3.6.0'
}

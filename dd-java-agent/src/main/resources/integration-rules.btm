### The contributions are injected using this file and byteman
###
### Helpers are a DD specific, they are defined in the current project
### The rule names provided (RULE <rulename>) are also used in the configuration.
### The name is used to remove the script if there is no support of the framework
###
### So, ensure that the rule name is correct defined both here and in the dd-trace-supported-framework.yaml
###


# Instrument Apache HTTP Client
# =============================
RULE opentracing-apache-httpclient
CLASS org.apache.http.impl.client.HttpClientBuilder
METHOD create()
HELPER com.datadoghq.agent.integration.ApacheHTTPClientHelper
AT EXIT
IF TRUE
DO
  $! = patch($!);
ENDRULE


# Instrument OkHttp
# ===========================
RULE opentracing-okhttp3
CLASS okhttp3.OkHttpClient$Builder
METHOD build()
HELPER com.datadoghq.agent.integration.OkHttpHelper
AT ENTRY
IF TRUE
DO
  patch($0)
ENDRULE

# This rule is required to force the loading of instrumentation rules in otarules.btm when the Spring Boot classloader
# is first instantiated, before any of the application components have been loaded. Scanning
# the classloaders resources for OpenTracing agent rule files is far easier this way, then
# having to scan the nested jar files.

RULE Load rules via Spring Boot Classloader
CLASS org.springframework.boot.loader.LaunchedURLClassLoader
METHOD <init>
AT EXIT
IF TRUE
DO
  com.datadoghq.trace.agent.TraceAnnotationsManager.finishInitialization($0);
ENDRULE
